<?xml version="1.0"?>
<config>
    <modules>
        <Fishpig_Wordpress>
            <version>3.0.29.0</version>
        </Fishpig_Wordpress>
    </modules>
    <global>
		<events>
            <controller_front_init_before>
                <observers>
					<wordpress>
						<type>singleton</type>
						<class>Fishpig_Wordpress_Controller_Router</class>
						<method>initControllerBeforeObserver</method>
					</wordpress>
                </observers>
            </controller_front_init_before>
            <controller_front_init_routers>
                <observers>
					<wordpress>
						<type>singleton</type>
						<class>Fishpig_Wordpress_Controller_Router</class>
						<method>initControllerObserver</method>
					</wordpress>
                </observers>
            </controller_front_init_routers>
        </events>
		<blocks>
			<wordpress>
				<class>Fishpig_Wordpress_Block</class>
			</wordpress>
		</blocks>
		<models>
			<wordpress>
				<class>Fishpig_Wordpress_Model</class>
				<resourceModel>wordpress_resource</resourceModel>
			</wordpress>
			<wordpress_resource>
				<class>Fishpig_Wordpress_Model_Resource</class>
				<entities>
					<!-- Magento Tables -->
					<association><table>wordpress_association</table></association>
					<association_type><table>wordpress_association_type</table></association_type>
					<!-- WordPress tables -->
					<post><table>posts</table></post>
					<page><table>posts</table></page>
					<post_meta><table>postmeta</table></post_meta>
					<page_meta><table>postmeta</table></page_meta>
					<post_comment><table>comments</table></post_comment>
					<post_comment_meta><table>commentmeta</table></post_comment_meta>
					<post_category><table>terms</table></post_category>
					<post_tag><table>terms</table></post_tag>
					<term><table>terms</table></term>
					<term_relationship><table>term_relationships</table></term_relationship>
					<term_taxonomy><table>term_taxonomy</table></term_taxonomy>
					<option><table>options</table></option>
					<menu><table>terms</table></menu>
					<menu_item><table>posts</table></menu_item>
					<user_meta><table>usermeta</table></user_meta>
					<user><table>users</table></user>
					<link><table>links</table></link>
					<link_category><table>terms</table></link_category>
					<image><table>posts</table></image>
				</entities>
			</wordpress_resource>
		</models>
		<helpers>
			<wordpress>
				<class>Fishpig_Wordpress_Helper</class>
			</wordpress>
		</helpers>
		<resources>
			<wordpress_read>
				<connection><use>wordpress</use></connection>
			</wordpress_read>
			<wordpress_write>
				<connection><use>wordpress</use></connection>
			</wordpress_write>
			<wordpress_setup>
				<setup><module>Fishpig_Wordpress</module></setup>
				<connection><use>core_setup</use></connection>
			</wordpress_setup>
		</resources>
	</global>
	<frontend>
		<events>
			<page_block_html_topmenu_gethtml_before>
				<observers>
					<wordpress>
						<type>singleton</type>
						<class>wordpress/observer</class>
						<method>injectTopmenuLinksObserver</method>
					</wordpress>
				</observers>
			</page_block_html_topmenu_gethtml_before>
		</events>
		<translate>
			<modules>
				<Fishpig_Wordpress>
					<files>
						<default>Fishpig_Wordpress.csv</default>
					</files>
				</Fishpig_Wordpress>
			</modules>
		</translate>
		<layout>
			<updates>
				<wordpress>
					<file>wordpress.xml</file>
				</wordpress>
			</updates>
		</layout>
		<routers>
			<wordpress>
				<use>standard</use>
				<args>
					<module>Fishpig_Wordpress</module>
					<frontName>wordpress</frontName>
				</args>
			</wordpress>
		</routers>
	</frontend>
	<adminhtml>
		<translate>
			<modules>
				<Fishpig_Wordpress>
					<files>
						<default>Fishpig_Wordpress.csv</default>
					</files>
				</Fishpig_Wordpress>
			</modules>
		</translate>
		<layout>
			<updates>
				<wordpress>
					<file>wordpress.xml</file>
				</wordpress>
			</updates>
		</layout>
		<events>
            <catalog_category_save_after>
            	<observers>
            		<wp_associations>
	            		<type>singleton</type>
    	        		<class>wordpress/observer</class>
        	    		<method>saveAssociationsObserver</method>
        	    	</wp_associations>
            	</observers>
            </catalog_category_save_after>
            <catalog_product_save_after>
            	<observers>
            		<wp_associations>
	            		<type>singleton</type>
    	        		<class>wordpress/observer</class>
        	    		<method>saveAssociationsObserver</method>
        	    	</wp_associations>
            	</observers>
            </catalog_product_save_after>
            <cms_page_save_after>
            	<observers>
            		<wp_associations>
	            		<type>singleton</type>
    	        		<class>wordpress/observer</class>
        	    		<method>saveAssociationsObserver</method>
        	    	</wp_associations>
            	</observers>
            </cms_page_save_after>
		</events>
	</adminhtml>
    <admin>
		<routers>
			<adminhtml>
				<args>
					<modules>
						<wordpress before="Mage_Adminhtml">Fishpig_Wordpress_Adminhtml</wordpress>
					</modules>
				</args>
			</adminhtml>
        </routers>
    </admin>	
	<default>
		<wordpress>
			<module>
				<enabled>1</enabled>
			</module>
			<database>
				<is_shared>1</is_shared>
				<charset>utf8</charset>
				<table_prefix>wp_</table_prefix>
			</database>
			<integration>
				<full>1</full>
				<route>blog</route>
				<path>wp</path>
			</integration>
			<toplink>
				<enabled>1</enabled>
				<label>Blog</label>
				<position>100</position>
			</toplink>
			<misc>
				<include_css>1</include_css>
				<autop>1</autop>
			</misc>
		</wordpress>
		<web>
			<routers>
				<wordpress_addon>
					<area>frontend</area>
					<class>Fishpig_Wordpress_Controller_Router_Addon</class>
				</wordpress_addon>
			</routers>
		</web>
	</default>
	<wordpress>
		<database>
			<before_connect>
				<tables>
					<post><table>posts</table></post>
					<page><table>posts</table></page>
					<post_meta><table>postmeta</table></post_meta>
					<page_meta><table>postmeta</table></page_meta>
					<post_comment><table>comments</table></post_comment>
					<post_comment_meta><table>commentmeta</table></post_comment_meta>
					<post_category><table>terms</table></post_category>
					<post_tag><table>terms</table></post_tag>
					<option><table>options</table></option>
					<term><table>terms</table></term>
					<term_relationship><table>term_relationships</table></term_relationship>
					<term_taxonomy><table>term_taxonomy</table></term_taxonomy>
					<menu><table>terms</table></menu>
					<menu_item><table>posts</table></menu_item>
					<user_meta><table>usermeta</table></user_meta>
					<user><table>users</table></user>
					<link><table>links</table></link>
					<link_category><table>terms</table></link_category>
					<image><table>posts</table></image>
				</tables>
			</before_connect>
		</database>
		<sidebar>
			<widgets>
				<search><block>sidebar_widget_search</block></search>
				<pages><block>sidebar_widget_pages</block><template>wordpress/sidebar/widget/pages.phtml</template></pages>
				<recent-posts><block>sidebar_widget_posts</block><template>wordpress/sidebar/widget/posts.phtml</template></recent-posts>
				<recent-comments><block>sidebar_widget_comments</block><template>wordpress/sidebar/widget/comments.phtml</template></recent-comments>
				<archives><block>sidebar_widget_archives</block><template>wordpress/sidebar/widget/archives.phtml</template></archives>
				<categories><block>sidebar_widget_categories</block><template>wordpress/sidebar/widget/categories.phtml</template></categories>
				<tag_cloud><block>sidebar_widget_tagcloud</block><template>wordpress/sidebar/widget/tagcloud.phtml</template></tag_cloud>
				<text><block>sidebar_widget_text</block><template>wordpress/sidebar/widget/text.phtml</template></text>
				<links><block>sidebar_widget_links</block><template>wordpress/sidebar/widget/links.phtml</template></links>
				<meta><block>sidebar_widget_meta</block><template>wordpress/sidebar/widget/meta.phtml</template></meta>
				<rss><block>sidebar_widget_rss</block><template>wordpress/sidebar/widget/rss.phtml</template></rss>
				<nav_menu><block>sidebar_widget_menu</block><template>wordpress/sidebar/widget/menu.phtml</template></nav_menu>
				<calendar><block>sidebar_widget_calendar</block></calendar>
				<!-- Non-Default Widgets -->
				<categoryposts><block>sidebar_widget_posts</block><template>wordpress/sidebar/widget/categoryposts.phtml</template></categoryposts>
			</widgets>
		</sidebar>
	</wordpress>
	<unit>
		<models>
			<wordpress>
				<image />
				<link />
				<option />
				<page />
				<post />
				<post_category />
				<post_comment />
				<post_tag />
				<menu />
				<menu_item />
				<term />
				<user />
			</wordpress>
		</models>
		<dirs>
			<WordPressIntegration>app/code/community/Fishpig/Wordpress</WordPressIntegration>
		</dirs>
	</unit>
</config>